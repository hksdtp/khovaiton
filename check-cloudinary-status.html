<!DOCTYPE html>
<html>
<head>
    <title>Kiá»ƒm tra Cloudinary Status</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .status { padding: 10px; margin: 10px 0; border-radius: 5px; }
        .success { background: #d4edda; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; border: 1px solid #f5c6cb; }
        .info { background: #d1ecf1; border: 1px solid #bee5eb; }
        img { max-width: 300px; margin: 10px; border: 1px solid #ccc; }
    </style>
</head>
<body>
    <h1>ğŸ” Kiá»ƒm tra Cloudinary Status</h1>
    
    <h2>ğŸ“‹ áº¢nh Ä‘Ã£ upload tá»« web app:</h2>
    <div id="uploaded-images"></div>
    
    <h2>ğŸ§ª Test URLs:</h2>
    <div id="test-results"></div>
    
    <h2>ğŸ“Š Cloudinary API Test:</h2>
    <div id="api-results"></div>
    
    <script>
        // Danh sÃ¡ch áº£nh Ä‘Ã£ upload
        const uploadedImages = [
            {
                fabricCode: '3 PASS BO - WHITE - COL 15',
                publicId: 'kxtnctannhobhvacgtqe',
                uploadUrl: 'https://res.cloudinary.com/dgaktc3fb/image/upload/v1752679690/kxtnctannhobhvacgtqe.png',
                directUrl: 'https://res.cloudinary.com/dgaktc3fb/image/upload/kxtnctannhobhvacgtqe'
            },
            {
                fabricCode: '33139-2-270',
                publicId: 'mfpxvks1qcxcrjac1roc',
                uploadUrl: 'https://res.cloudinary.com/dgaktc3fb/image/upload/v1752722045/mfpxvks1qcxcrjac1roc.png',
                directUrl: 'https://res.cloudinary.com/dgaktc3fb/image/upload/mfpxvks1qcxcrjac1roc'
            }
        ]
        
        // Hiá»ƒn thá»‹ áº£nh Ä‘Ã£ upload
        const uploadedDiv = document.getElementById('uploaded-images')
        uploadedImages.forEach(img => {
            const div = document.createElement('div')
            div.className = 'info'
            div.innerHTML = `
                <h3>${img.fabricCode}</h3>
                <p><strong>Public ID:</strong> ${img.publicId}</p>
                <p><strong>Upload URL:</strong> <a href="${img.uploadUrl}" target="_blank">${img.uploadUrl}</a></p>
                <p><strong>Direct URL:</strong> <a href="${img.directUrl}" target="_blank">${img.directUrl}</a></p>
                <img src="${img.directUrl}" alt="${img.fabricCode}" onload="console.log('âœ… Loaded: ${img.fabricCode}')" onerror="console.log('âŒ Failed: ${img.fabricCode}')">
            `
            uploadedDiv.appendChild(div)
        })
        
        // Test URLs
        async function testUrls() {
            const testDiv = document.getElementById('test-results')
            
            for (const img of uploadedImages) {
                const urls = [img.uploadUrl, img.directUrl]
                
                for (const url of urls) {
                    try {
                        const response = await fetch(url, { method: 'HEAD' })
                        const div = document.createElement('div')
                        div.className = response.ok ? 'success' : 'error'
                        div.innerHTML = `
                            <strong>${img.fabricCode}</strong><br>
                            URL: ${url}<br>
                            Status: ${response.status} ${response.statusText}
                        `
                        testDiv.appendChild(div)
                        console.log(`${response.ok ? 'âœ…' : 'âŒ'} ${img.fabricCode}: ${url} - ${response.status}`)
                    } catch (error) {
                        const div = document.createElement('div')
                        div.className = 'error'
                        div.innerHTML = `
                            <strong>${img.fabricCode}</strong><br>
                            URL: ${url}<br>
                            Error: ${error.message}
                        `
                        testDiv.appendChild(div)
                        console.error(`âŒ ${img.fabricCode}: ${url} - ${error.message}`)
                    }
                }
            }
        }
        
        // Test Cloudinary API (Admin API cáº§n API secret nÃªn khÃ´ng test Ä‘Æ°á»£c tá»« browser)
        function testCloudinaryAPI() {
            const apiDiv = document.getElementById('api-results')
            apiDiv.innerHTML = `
                <div class="info">
                    <h3>âš ï¸ Cloudinary Admin API</h3>
                    <p>Admin API cáº§n API secret nÃªn khÃ´ng thá»ƒ test tá»« browser.</p>
                    <p>Äá»ƒ kiá»ƒm tra Ä‘áº§y Ä‘á»§, cáº§n:</p>
                    <ul>
                        <li>âœ… Upload API (Ä‘Ã£ hoáº¡t Ä‘á»™ng - unsigned preset)</li>
                        <li>â“ Admin API (cáº§n server-side Ä‘á»ƒ list/search images)</li>
                        <li>âœ… Delivery API (Ä‘ang test á»Ÿ trÃªn)</li>
                    </ul>
                    
                    <h4>ğŸ”§ Äá»ƒ Ä‘á»“ng bá»™ 2 chiá»u cáº§n:</h4>
                    <ol>
                        <li><strong>Server-side script</strong> Ä‘á»ƒ gá»i Admin API</li>
                        <li><strong>Webhook</strong> tá»« Cloudinary khi cÃ³ upload má»›i</li>
                        <li><strong>Periodic sync</strong> Ä‘á»ƒ check áº£nh má»›i</li>
                        <li><strong>Database</strong> Ä‘á»ƒ lÆ°u mapping persistent</li>
                    </ol>
                    
                    <h4>ğŸ“‹ Hiá»‡n táº¡i cÃ³ thá»ƒ lÃ m:</h4>
                    <ul>
                        <li>âœ… Upload tá»« web app â†’ Cloudinary</li>
                        <li>âœ… Hiá»ƒn thá»‹ áº£nh tá»« Cloudinary â†’ web app</li>
                        <li>âŒ Tá»± Ä‘á»™ng detect áº£nh má»›i trÃªn Cloudinary</li>
                        <li>âŒ Sync ngÆ°á»£c tá»« Cloudinary â†’ web app</li>
                    </ul>
                </div>
            `
        }
        
        // Cháº¡y tests
        testUrls()
        testCloudinaryAPI()
        
        // Log instructions
        console.log(`
ğŸ” Cloudinary Status Check Results:

ğŸ“‹ Uploaded Images:
${uploadedImages.map(img => `- ${img.fabricCode}: ${img.publicId}`).join('\n')}

ğŸ§ª Manual Tests:
1. Check if images load above
2. Click URLs to verify accessibility
3. Check browser console for detailed results

ğŸ’¡ Next Steps for 2-way sync:
1. Implement server-side Admin API calls
2. Set up Cloudinary webhooks
3. Create periodic sync job
4. Add database for persistent mapping
        `)
    </script>
</body>
</html>
