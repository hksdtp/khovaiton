<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Fixed Cloudinary URLs</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .fabric-test { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 8px; }
        .fabric-test h3 { margin-top: 0; color: #333; }
        .url { font-family: monospace; background: #f5f5f5; padding: 5px; border-radius: 3px; word-break: break-all; }
        .image-container { margin: 10px 0; }
        .image-container img { max-width: 200px; max-height: 200px; border: 1px solid #ddd; border-radius: 4px; }
        .status { font-weight: bold; padding: 2px 8px; border-radius: 3px; }
        .status.success { background: #d4edda; color: #155724; }
        .status.error { background: #f8d7da; color: #721c24; }
        .loading { color: #6c757d; font-style: italic; }
    </style>
</head>
<body>
    <h1>üß™ Test Fixed Cloudinary URLs</h1>
    <p>Ki·ªÉm tra URLs sau khi s·ª≠a CloudinaryService ƒë·ªÉ d√πng th∆∞ m·ª•c <code>fabrics/</code></p>

    <div id="results"></div>

    <script>
        const fabricCodes = [
            'AR-071-02B',
            'BERTONE-30', 
            'TP01623-224',
            'DCR-RP1120',
            '71022-10',
            'YB0320-7',
            'M907-12',
            'W5601-6',
            '83102-19'
        ]

        function createFabricImageUrl(fabricCode) {
            return `https://res.cloudinary.com/dgaktc3fb/image/upload/fabrics/${fabricCode}.jpg`
        }

        async function testFabricImage(fabricCode) {
            const url = createFabricImageUrl(fabricCode)
            const container = document.createElement('div')
            container.className = 'fabric-test'
            container.innerHTML = `
                <h3>${fabricCode}</h3>
                <div class="url">${url}</div>
                <div class="image-container">
                    <div class="loading">ƒêang t·∫£i...</div>
                </div>
                <div class="status-container"></div>
            `
            
            document.getElementById('results').appendChild(container)
            
            const img = new Image()
            const imageContainer = container.querySelector('.image-container')
            const statusContainer = container.querySelector('.status-container')
            
            img.onload = function() {
                imageContainer.innerHTML = ''
                imageContainer.appendChild(img)
                statusContainer.innerHTML = '<span class="status success">‚úÖ ·∫¢nh t·∫£i th√†nh c√¥ng</span>'
            }
            
            img.onerror = function() {
                imageContainer.innerHTML = '<div style="color: #666; font-style: italic;">‚ùå Kh√¥ng th·ªÉ t·∫£i ·∫£nh</div>'
                statusContainer.innerHTML = '<span class="status error">‚ùå ·∫¢nh kh√¥ng t·ªìn t·∫°i ho·∫∑c l·ªói t·∫£i</span>'
            }
            
            img.src = url
            
            // C≈©ng test b·∫±ng fetch
            try {
                const response = await fetch(url, { method: 'HEAD' })
                if (!response.ok) {
                    console.log(`‚ùå ${fabricCode}: ${response.status} ${response.statusText}`)
                } else {
                    console.log(`‚úÖ ${fabricCode}: ${response.status} OK`)
                }
            } catch (error) {
                console.log(`‚ùå ${fabricCode}: Fetch error - ${error.message}`)
            }
        }

        // Test t·∫•t c·∫£ fabric codes
        console.log('üöÄ B·∫Øt ƒë·∫ßu test fixed URLs...')
        fabricCodes.forEach(testFabricImage)
    </script>
</body>
</html>